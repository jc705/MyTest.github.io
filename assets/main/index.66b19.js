window.__require=function t(e,n,o){function r(c,s){if(!n[c]){if(!e[c]){var u=c.split("/");if(u=u[u.length-1],!e[u]){var a="function"==typeof __require&&__require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+c+"'")}c=u}var p=n[c]={exports:{}};e[c][0].call(p.exports,function(t){return r(e[c][1][t]||t)},p,p.exports,t,e,n,o)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({"CanvasVideo ":[function(t,e,n){"use strict";cc._RF.push(e,"97b4a+8tjJLbZqF167K6xQG","CanvasVideo ");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var u=cc._decorator,a=u.ccclass,p=u.property,l=u.requireComponent,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.videoPlayer=null,e.spriteFrameCache=[],e.index=0,e}return r(e,t),e.prototype.start=function(){this.visSize=cc.winSize,this.init(this.videoPlayer)},e.prototype.init=function(t){var e=this;t!==this.videoPlayer&&(this.videoPlayer=t);var n=document.createElement("canvas");n.width=this.node.width,n.height=this.node.height,this._canvas=n,this._canvasCtx=n.getContext("2d"),this._sprite=this.getComponent(cc.Sprite),this._texture=new cc.Texture2D;for(var o=0;o<2;o++)this.spriteFrameCache.push(new cc.SpriteFrame);this.bind(function(){e.schedule(e.updateTexture,.04,cc.macro.REPEAT_FOREVER)})},e.prototype.updateTexture=function(){return c(this,void 0,Promise,function(){var t,e;return s(this,function(){return this.videoPlayer?(t=this.videoPlayer._impl._video,this._canvasCtx.drawImage(t,0,0,this.visSize.width,this.visSize.height),this._texture.initWithElement(this._canvas),(e=this.spriteFrameCache[this.index]).setTexture(this._texture),this._sprite.spriteFrame=e,this.index=1^this.index,[2]):[2]})})},e.prototype.bind=function(t){var e=this;this._videoPlayer=document.querySelector("video.cocosVideo"),navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(n){e.handleSuccess(n),e.videoPlayer.play(),t()}).catch(this.handleError)},e.prototype.handleSuccess=function(t){this._videoPlayer.srcObject=t},e.prototype.handleError=function(t){console.log("\u7ed1\u5b9a\u5931\u8d25:",t.ToString())},e.prototype.clearSprite=function(){this._sprite.spriteFrame=null},i([p(cc.VideoPlayer)],e.prototype,"videoPlayer",void 0),i([a,l(cc.Sprite)],e)}(cc.Component);n.default=h,cc._RF.pop()},{}],ReqHttp:[function(t,e,n){"use strict";cc._RF.push(e,"2fb017Mu31DW6ZqCLZaDXp5","ReqHttp"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.getInst=function(){return this._inst||(this._inst=new t),this._inst},Object.defineProperty(t,"inst",{get:function(){return this.getInst()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"xhr",{get:function(){return this._xhr||(this._xhr=cc.loader.getXMLHttpRequest()),this._xhr},enumerable:!1,configurable:!0}),t.post=function(t,e,n){var o=this.xhr;o.open("POST",t),o.onreadystatechange=function(){if(4==o.readyState&&o.status>=200&&o.status<=207){var t=o.responseText;n(t)}},o.send(e)},t.get=function(t,e,n){var o=this.xhr;o.open("GET",t+e),o.onreadystatechange=function(){if(4==o.readyState&&o.status>=200&&o.status<=207){var t=o.responseText;n(t)}},o.send()},t._inst=null,t._xhr=null,t}();n.default=o,cc._RF.pop()},{}],test2:[function(t,e,n){"use strict";cc._RF.push(e,"1fbf8Z4yHxF17SGRgp2kpLm","test2");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./txySdk"),s=cc._decorator,u=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){c.default.inst.initSdk(),c.default.inst.livePush()},i([u],e)}(cc.Component));n.default=a,cc._RF.pop()},{"./txySdk":"txySdk"}],test:[function(t,e,n){"use strict";cc._RF.push(e,"9a5aeQuIWZNqJrTSr+WITEF","test");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){if(window.wx){console.log("wx:"),console.log(window.wx);var t=window.wx;t.getUserInfo({success:function(t){console.log(t)}}),this.scheduleOnce(function(){var e={appId:"wxec08df14b53cbf89",path:"",success:function(){console.log("navigateToMiniProgram succ!!!")},fail:function(){console.log("navigateToMiniProgram fail!!!")}};t.navigateToMiniProgram(e)},5)}},i([s],e)}(cc.Component));n.default=u,cc._RF.pop()},{}],txySdk:[function(t,e,n){"use strict";cc._RF.push(e,"89808JMGt9O5bpGwBRgJMhI","txySdk"),Object.defineProperty(n,"__esModule",{value:!0});var o=window.TXLivePusher,r=function(){function t(){this._content="local_video",this._livePusher=null}return t.getInst=function(){return this._inst||(this._inst=new t),this._inst},Object.defineProperty(t,"inst",{get:function(){return this.getInst()},enumerable:!1,configurable:!0}),t.prototype.initSdk=function(){o&&(this._livePusher=new o,this._livePusher.setRenderView(this._content),this._livePusher.videoView.muted=!0),navigator.mediaDevices.getUserMedia()},t.prototype.supportTest=function(){o.checkSupport().then(function(t){console.log("checkSupport"),console.log(t)})},t.prototype.updateVideoQuality=function(t){this._livePusher.setVideoQuality(t)},t.prototype.updateAudioQuality=function(t){this._livePusher.setAudioQuality(t)},t.prototype.customProperty=function(t,e){this._livePusher.setProperty(t,e)},t.prototype.livePush=function(){this._livePusher.startCamera().then(function(){this.livePusher.startPush("webrtc://168799.livepush.myqcloud.com/AppName/10001")}).catch(function(t){console.log("\u6253\u5f00\u6444\u50cf\u5934\u5931\u8d25: "+t.toString())})},t.prototype.stoplive=function(){this._livePusher.stopPush(),this._livePusher.stopCamera(),this._livePusher.stopMicrophone()},t.prototype.SwitchCamera=function(t){t&&this.livePush(),!t&&this._livePusher.stopCamera()},t.prototype.SwitchMicrophone=function(t){t&&this._livePusher.startMicrophone(),!t&&this._livePusher.stopMicrophone()},t.prototype.quit=function(){this._livePusher.isPushing()&&this.stoplive(),this._livePusher.destroy()},t._inst=null,t}();n.default=r,cc._RF.pop()},{}]},{},["CanvasVideo ","ReqHttp","test","test2","txySdk"]);